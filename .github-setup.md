# GitHub Repository Protection Setup

This document contains the steps to protect the repository after creation.

## Default GitHub Behavior
- **Public repos**: Anyone can view and fork, but only you (owner) can push directly
- **Pull Requests**: Others must fork and submit PRs for you to review

## Recommended Branch Protection Rules

### After creating the repository, run these commands:

```bash
# Enable branch protection on main branch
gh api repos/senzal/LTMessages/branches/main/protection \
  --method PUT \
  --field required_pull_request_reviews[required_approving_review_count]=1 \
  --field required_pull_request_reviews[dismiss_stale_reviews]=true \
  --field enforce_admins=false \
  --field required_status_checks=null \
  --field restrictions=null

# Or configure via GitHub CLI:
gh repo edit senzal/LTMessages \
  --enable-issues=true \
  --enable-wiki=false \
  --enable-projects=false
```

## Manual Setup (via GitHub Web Interface)

### 1. Navigate to Repository Settings
- Go to: https://github.com/senzal/LTMessages/settings

### 2. Set Up Branch Protection Rules
- Click **Branches** in the left sidebar
- Click **Add branch protection rule**
- **Branch name pattern**: `main`

### 3. Enable These Protections:
- ✅ **Require a pull request before merging**
  - ✅ Require approvals: 1
  - ✅ Dismiss stale pull request approvals when new commits are pushed
- ✅ **Require status checks to pass before merging** (if using CI/CD)
- ✅ **Require conversation resolution before merging**
- ⚠️ **Do NOT** check "Include administrators" (you want to be able to push directly)
- ✅ **Require linear history** (optional, keeps history clean)
- ✅ **Allow force pushes**: OFF
- ✅ **Allow deletions**: OFF

### 4. Set Repository Permissions
- Go to **Settings** → **Collaborators and teams**
- Verify only you have write access
- Remove any unwanted collaborators

### 5. Optional: Disable Unused Features
- **Settings** → **General**
  - ✅ Issues: Enabled (for bug reports)
  - ❌ Projects: Disabled
  - ❌ Wiki: Disabled
  - ✅ Discussions: Optional (community feedback)

## CODEOWNERS File (Optional)

Create a `.github/CODEOWNERS` file to automatically request your review on PRs:

```
# Default owner for everything
*       @senzal
```

## Result
- ✅ Only you can push directly to main branch
- ✅ Others must fork and create pull requests
- ✅ You must approve all PRs before merging
- ✅ Protected from accidental force pushes or deletions
- ✅ Clean commit history maintained

## Quick CLI Command (After Authentication)

```bash
# Create repo with protection
gh repo create senzal/LTMessages --public --source=. --remote=origin --push

# Enable branch protection (requires admin permissions)
gh api repos/senzal/LTMessages/branches/main/protection \
  -X PUT \
  -F required_pull_request_reviews[required_approving_review_count]=1 \
  -F required_pull_request_reviews[dismiss_stale_reviews]=true \
  -F enforce_admins=false \
  -F allow_force_pushes=false \
  -F allow_deletions=false
```
